!function(a){function b(a){return"function"==typeof a}function c(a,b){if(void 0===b&&(b=1),null==a)return String(a);if("string"==typeof a)return'"'+a+'"';if("function"==typeof a)return a.name||a.toString(b);if(p(a))return"["+a.map(function(a){return c(a,b)}).join(", ")+"]";if(a&&"object"==typeof a){var d=new Array(b).join("	");return"{"+Object.keys(a).map(function(e){return"\n	"+d+e+": "+c(a[e],b+1)}).join(",")+"\n"+d+"}"}return String(a)}function d(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1]}function e(a){return Array.prototype.slice.call(a)}function f(a,b,c){if(b instanceof Object)for(var d in b)b.hasOwnProperty(d)&&(a.hasOwnProperty(d)?a[d]instanceof Object?f(a[d],b[d],c):c&&(a[d]=b[d]):a[d]=b[d]);return a}function g(a){if(!h(a))return new g.Object(a);var c=function(a){return c.validate(a),a}.bind(this);return Object.setPrototypeOf(c,g.prototype),c.constructor=g,c.prototype=Object.create(b(a)?a.prototype:null),c.prototype.constructor=c,c.definition=i(a),c.assertions=[],c}function h(a){return"object"!=typeof a||p(a)||a instanceof RegExp}function i(a){if(h(a)){if(!p(a))return[a];if(a.length<2)return a.concat(void 0)}else Object.keys(a).forEach(function(b){a[b]=i(a[b])});return a}function j(a,b,e){if(!b.some(function(b){return k(a,b)}))throw new TypeError("expecting "+(e?e+" to be ":"")+b.map(c).join(" or ")+", got "+(null!=a?d(a)+" ":"")+c(a))}function k(a,c){return null==a?a===c:c instanceof g?c.isValidModelFor(a):c instanceof RegExp?c.test(a):a===c||b(c)&&a instanceof c||a.constructor===c}function l(a,b){for(var d=0,e=b.length;e>d;d++)if(!b[d](a))throw new TypeError("an assertion of the model is not respected: "+c(b[d]))}function m(a,b,c){h(b)?j(a,b,c):Object.keys(b).forEach(function(d){var e=c?[c,d].join("."):d;m(a instanceof Object?a[d]:void 0,b[d],e)})}function n(a,b,c){if(b instanceof g.Function)return b(a);if(h(b))return j(a,b,c),a;var d=a instanceof Object?a:Object.create(null),e=Object.create(Object.getPrototypeOf(d));return Object.keys(b).forEach(function(a){var f=c?[c,a].join("."):a,g=a.toUpperCase()!=a;Object.defineProperty(e,a,{get:function(){return n(d[a],b[a],f)},set:function(c){if(!g&&void 0!==d[a])throw new TypeError("cannot redefine constant "+a);var e=n(c,b[a],f);h(b[a])||m(e,b[a],f),d[a]=e},enumerable:"_"!==a[0]})}),e}function o(a,b,c,d){c.forEach(function(c){Object.defineProperty(a,c,{get:function(){return b[c]},set:function(a){j(a,d,"Array["+c+"]"),b[c]=a}})})}var p=Array.isArray||function(a){return a instanceof Array};Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},Object.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]}),g.prototype=Object.create(Function.prototype),g.prototype.toString=function(a){return c(this.definition,a)},g.prototype.validate=function(a){j(a,this.definition),l(a,this.assertions)},g.prototype.isValidModelFor=function(a){try{return this.validate(a),!0}catch(b){return!1}},g.prototype.extend=function(a){var b=new g(this.definition.concat(i(a)));return b.prototype=Object.create(this.prototype),b.prototype.constructor=b,b.assertions=this.assertions,b},g.prototype.assert=function(a){return b(a)&&this.assertions.push(a),this},g.Object=function r(a){var b=function(a){if(!(this instanceof b))return new b(a);f(this,a,!0);var c=n(this,b.definition);return m(c,b.definition),c};return Object.setPrototypeOf(b,r.prototype),b.constructor=r,b.prototype=Object.create(Object.prototype),b.prototype.constructor=b,b.definition=i(a),b.assertions=[],b},g.Object.prototype=Object.create(g.prototype),g.Object.prototype.validate=function(a){m(a,this.definition),l(a,this.assertions)},g.Object.prototype.extend=function(a){var b=new g.Object(f(a||{},this.definition));return b.prototype=Object.create(this.prototype),b.prototype.constructor=b,b.assertions=e(this.assertions),b},g.Object.prototype.defaults=function(a){return f(this.prototype,a),this};var q=["pop","push","reverse","shift","sort","splice","unshift"];g.Array=function s(a){var b=function(){var a=e(arguments);if(!(this instanceof b))return new(Function.prototype.bind.apply(b,[null].concat(a)));b.validate(a);var c=this;return q.forEach(function(d){Object.defineProperty(c,d,{configurable:!0,value:function(){var e=a.slice();Array.prototype[d].apply(e,arguments),b.validate(e);var f=Object.keys(e).filter(function(a){return!(a in c)});return o(c,a,f,b.definition),Array.prototype[d].apply(a,arguments)}})}),o(c,a,Object.keys(a),b.definition),Object.defineProperty(c,"length",{enumerable:!1,get:function(){return a.length}}),c};return Object.setPrototypeOf(b,s.prototype),b.prototype=Object.create(Array.prototype),b.prototype.constructor=b,b.definition=i(a),b.assertions=[],b},g.Array.prototype=Object.create(g.prototype),g.Array.prototype.validate=function(a){if(!p(a))throw new TypeError("expecting an array, got: "+c(a));for(var b=0,d=a.length;d>b;b++)j(a[b],this.definition,"Array["+b+"]");l(a,this.assertions)},g.Array.prototype.toString=function(a){return"Model.Array("+c(this.definition,a)+")"},g.Array.prototype.extend=function(a){var b=new g.Array(this.definition.concat(i(a)));return b.prototype=Object.create(this.prototype),b.prototype.constructor=b,b.assertions=e(this.assertions),b},g.Function=function t(){var a=function(b){if(!(this instanceof a))return new a(b);var d=a.definition,g=function(){var a=f(e(arguments),d.defaults);if(a.length!==d.arguments.length)throw new TypeError("expecting "+c(b)+" to be called with "+d.arguments.length+" arguments, got "+a.length);d.arguments.forEach(function(b,c){j(a[c],b,"arguments["+c+"]")});var g=b.apply(this,a);return"return"in d&&j(g,d["return"],"return value"),g};return Object.setPrototypeOf(g,a.prototype),g.constructor=t,g};return a.definition={arguments:Array.prototype.map.call(arguments,i)},a.prototype=Object.create(Function.prototype),a.prototype.constructor=a,Object.setPrototypeOf(a,t.prototype),a},g.Function.prototype=Object.create(g.prototype),g.Function.prototype.isValidModelFor=b,g.Function.prototype.validate=function(a){if(!b(a))throw new TypeError("expecting a function, got: "+c(a))},g.Function.prototype.toString=function(a){var b="Model.Function("+this.definition.arguments.map(function(b){return c(b,a)}).join(",")+")";return"return"in this.definition&&(b+=".return("+c(this.definition["return"])+")"),b},g.Function.prototype["return"]=function(a){return this.definition["return"]=i(a),this},g.Function.prototype.defaults=function(){return this.definition.defaults=e(arguments),this},a.Model=g}(this);