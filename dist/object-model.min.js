// ObjectModel v2.5.0 - http://objectmodel.js.org
!function(a){function b(a,b){return b instanceof a}function c(a){return"function"==typeof a}function d(a){return"object"==typeof a}function e(a){return a&&d(a)&&Object.getPrototypeOf(a)===Object.prototype}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1]}function g(a){return Array.prototype.slice.call(a)}function h(a,b){return void 0===b?a:b}function i(a,b,c,d){for(var f in b||{})if(d||b.hasOwnProperty(f))if(c&&e(b[f])){var g={};i(g,a[f],c),i(g,b[f],c),a[f]=g}else a[f]=b[f]}function j(a,b,c,d){$(a,b,{value:c,enumerable:d,writable:!0,configurable:!0})}function k(a,b){Object.setPrototypeOf(a,b[R]),j(a,S,b)}function l(a,b){a[R]=Object.create(b),a[R][S]=a}function m(a,e){if(e=e||[],e.length>15||e.indexOf(a)>=0)return"...";if(null==a)return String(a);if("string"==typeof a)return'"'+a+'"';if(b(n,a))return a.toString(e);if(e=[a].concat(e),c(a))return a.name||a.toString(e);if(b(Array,a))return"["+a.map(function(a){return m(a,e)}).join(", ")+"]";if(a.toString!==Object.prototype.toString)return a.toString();if(a&&d(a)){var f=new Array(e.length).join("\t"),g=Object.keys(a);return"{"+g.map(function(b){return"\n"+f+"\t"+b+": "+m(a[b],e)}).join(",")+(g.length?"\n"+f:"")+"}"}return String(a)}function n(a){if(e(a))return n[y](a);var b=function(a){return a=h(b[T],a),b[G](a),a};return o(b,a,n),b}function o(a,b,c){k(a,c),a[D]=b,a[E]=a[E].slice(),j(a,O,[])}function p(a){if(e(a))Object.keys(a).forEach(function(b){a[b]=p(a[b])});else{if(!b(Array,a))return[a];if(1===a.length)return a.concat(void 0,null)}return a}function q(a,c,d,f,g){if(b(n,c)){var h=f.indexOf(c);if(h!==-1&&f.slice(h+1).indexOf(c)!==-1)return;return c[H](a,d,f.concat(c),g)}if(e(c))Object.keys(c).forEach(function(b){var e=null!=a?a[b]:void 0;q(e,c[b],d?d+"."+b:b,f,g)});else{for(var i=p(c),j=0,k=i.length;j<k;j++)if(r(a,i[j],d,f))return;var l={};l[K]=c,l[L]=a,l[M]=d,g.push(l)}}function r(a,d,f,g){if(null==a)return a===d;if(e(d)||b(n,d)){var h=[];return q(a,d,f,g,h),!h.length}return b(RegExp,d)?d[I](a):d===Number||d===Date?a[S]===d&&!isNaN(a):a===d||c(d)&&b(d,a)||a[S]===d}function s(a,b,c){void 0===c&&(c=b[O]);for(var d=0,e=b[E].length;d<e;d++){var f,g=b[E][d];try{f=g.call(b,a)}catch(a){f=a}if(f!==!0){var h={};h[N]=g[F].call(b,f,a),c.push(h)}}}function t(a,c){for(var d=p(c||[]),e=[],f=0,g=d.length;f<g;f++){var h=d[f];if(b(n,h)){if(b(h,a))return a;h.test(a)&&e.push(h)}}var i=e.length;return 1===i?e[0](a):(i>1&&console.warn("Ambiguous model for value "+m(a)+", could be "+e.join(" or ")),a)}function u(a,c,d,f){if(!e(d))return t(c,d);var g=b(Object,c)?c:{},h=Object.create(Object.getPrototypeOf(g));for(var i in g)!g.hasOwnProperty(i)||i in d||(h[i]=g[i]);return Object.keys(d).forEach(function(b){var e=f?f+"."+b:b,i=n[B](b);$(h,b,{get:function(){return u(a,g[b],d[b],e)},set:function(f){if(i&&void 0!==g[b]){var h={};h[N]="cannot redefine constant "+b,a[O].push(h)}var j=u(a,f,d[b],e);q(j,d[b],e,[],a[O]);var k=g[b];g[b]=j,s(c,a),a[O].length&&(g[b]=k,a[Q]())},enumerable:!n[C](b)})}),h}function v(a,b,c,d){$(a,c,{enumerable:!0,get:function(){return b[c]},set:function(a){x(b,c,a,d)}})}function w(a,b,c,d){return function(){var e=a.slice();if(Array[R][b].apply(e,arguments),c[G](e),!Z)for(var f in e)!e.hasOwnProperty(f)||f in d||v(d,a,f,c);for(var g=Array[R][b].apply(a,arguments),h=0,i=a.length;h<i;h++)a[h]=t(a[h],c[D]);return g}}function x(a,b,c,d){parseInt(b)===+b&&b>=0&&(c=t(c,d[D]),q(c,d[D],z+"["+b+"]",[],d[O]));var e=a.slice();e[b]=c,s(e,d),d[Q](),a[b]=c}var y="Object",z="Array",A="Function",B="conventionForConstant",C="conventionForPrivate",D="definition",E="assertions",F="_onFail",G="validate",H="_validator",I="test",J="extend",K="expected",L="received",M="path",N="message",O="errorStack",P="errorCollector",Q="unstack",R="prototype",S="constructor",T="default",U="defaults",V="return",W="arguments",X=["pop","push","reverse","shift","sort","splice","unshift"],Y=/\n.*object-model(.|\n)*object-model.*/,Z="function"==typeof Proxy,$=Object.defineProperty;"name"in Function.prototype&&"name"in function(){}||$(Function.prototype,"name",{get:function(){var a=Function.prototype.toString.call(this).match(/\s*function\s+([^\(\s]*)\s*/);return a&&a[1]}}),!Object.setPrototypeOf&&b(Array,{__proto__:[]})&&(Object.setPrototypeOf=function(a,b){return a.__proto__=b,a}),l(n,Function[R]);var _=n[R];_.toString=function(a){return p(this[D]).map(function(b){return m(b,a)}).join(" or ")},_[E]=[],_[G]=function(a,b){this[H](a,null,[],this[O]),this[Q](b)},_[I]=function(a){var b=[];return this[H](a,null,[],b),!b.length},_[J]=function(){var a,e,f=g(this[E]),h=g(arguments);b(n[y],this)?(a={},e={},i(a,this[D]),i(e,this[R],!1,!0),h.forEach(function(f){b(n,f)&&i(a,f[D],!0),c(f)&&i(e,f[R],!0,!0),d(f)&&i(a,f,!0,!0)})):a=h.reduce(function(a,b){return a.concat(p(b))},p(this[D])).filter(function(a,b,c){return c.indexOf(a)===b}),h.forEach(function(a){b(n,a)&&(f=f.concat(a[E]))});var j=new this[S](a);return l(j,this[R]),i(j[R],e),j[E]=f,j[P]=this[P],j},_.assert=function(a,b){b=b||m(a);var d=c(b)?b:function(a,c){return'assertion "'+b+'" returned '+m(a)+" for value "+m(c)};return j(a,F,d),this[E]=this[E].concat(a),this},_.defaultTo=function(a){return this[T]=a,this},_[P]=function(a){var b=new TypeError(a.map(function(a){return a[N]}).join("\n"));throw b.stack&&(b.stack=b.stack.replace(Y,"")),b},n[B]=function(a){return a.toUpperCase()===a},n[C]=function(a){return"_"===a[0]},j(_,H,function(a,b,c,d){q(a,this[D],b,c,d),s(a,this,d)}),j(_,Q,function(a){if(this[O].length){a||(a=this[P]);var c=this[O].map(function(a){if(!a[N]){var c=b(Array,a[K])?a[K]:[a[K]];a[N]="expecting "+(a[M]?a[M]+" to be ":"")+c.map(function(a){return m(a)}).join(" or ")+", got "+(null!=a[L]?f(a[L])+" ":"")+m(a[L])}return a});this[O]=[],a.call(this,c)}}),n[y]=function(a){var c=function(a){if(!b(c,this))return new c(a);a=h(c[T],a),i(this,a,!0);var d=u(c,this,c[D]);return c[G](d),d};return l(c,Object[R]),o(c,a,n[y]),c},l(n[y],_);var aa=n[y][R];aa[U]=function(a){return i(this[R],a),this},aa.toString=function(a){return m(this[D],a)},j(aa,H,function(a,b,c,e){if(d(a))q(a,this[D],b,c,e);else{var f={};f[K]=this,f[L]=a,f[M]=b,e.push(f)}s(a,this)}),n[z]=function(a){var b=function(a){a=h(b[T],a);var c;if(b[G](a),Z)c=new Proxy(a,{get:function(a,c){return c===S?b:X.indexOf(c)>=0?w(a,c,b):a[c]},set:function(a,c,d){x(a,c,d,b)},getPrototypeOf:function(){return b[R]}});else{c=Object.create(Array[R]);for(var d in a)a.hasOwnProperty(d)&&v(c,a,d,b);$(c,"length",{get:function(){return a.length}}),$(c,"toJSON",{value:function(){return a}}),X.forEach(function(d){j(c,d,w(a,d,b,c))}),k(c,b)}return c};return l(b,Array[R]),o(b,a,n[z]),b},l(n[z],n[R]);var ba=n[z][R];ba.toString=function(a){return z+" of "+m(this[D],a)},j(ba,H,function(a,c,d,e){if(b(Array,a))for(var f=0,g=a.length;f<g;f++)a[f]=t(a[f],this[D]),q(a[f],this[D],(c||z)+"["+f+"]",d,e);else{var h={};h[K]=this,h[L]=a,h[M]=c,e.push(h)}s(a,this)}),n[A]=function(){var a=function(b){b=h(a[T],b);var c=a[D],d=function(){var d,e=[];if(i(e,c[U]),i(e,g(arguments)),e.length>c[W].length){var f={};f[K]=m(b)+" to be called with "+c[W].length+" "+W,f[L]=e.length,a[O].push(f)}return c[W].forEach(function(b,c){e[c]=t(e[c],b),q(e[c],b,W+"["+c+"]",[],a[O])}),s(e,a),a[O].length||(d=b.apply(this,e),V in c&&(d=t(d,c[V]),q(d,c[V],V+" value",[],a[O]))),a[Q](),d};return k(d,a),d};l(a,Function[R]);var b={};return b[W]=g(arguments),o(a,b,n[A]),a},l(n[A],n[R]);var ca=n[A][R];ca.toString=function(a){var b=A+"("+this[D][W].map(function(b){return m(b,a)}).join(",")+")";return V in this[D]&&(b+=" => "+m(this[D][V])),b},ca[V]=function(a){return this[D][V]=a,this},ca[U]=function(){return this[D][U]=g(arguments),this},j(ca,H,function(a,b,d,e){if(!c(a)){var f={};f[K]=A,f[L]=a,f[M]=b,e.push(f)}}),a.Model=n}(this);