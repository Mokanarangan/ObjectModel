// ObjectModel v2.4.5 - http://objectmodel.js.org
!function(a){function b(a,b){return b instanceof a}function c(a){return"function"==typeof a}function d(a){return"object"==typeof a}function e(a){return a&&d(a)&&Object.getPrototypeOf(a)===Object.prototype}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1]}function g(a){return Array.prototype.slice.call(a)}function h(a,b){return void 0===b?a:b}function i(a,b,c,d){for(var f in b||{})if(d||b.hasOwnProperty(f))if(c&&e(b[f])){var g={};i(g,a[f],c),i(g,b[f],c),a[f]=g}else a[f]=b[f]}function j(a,b,c,d){$(a,b,{value:c,enumerable:d,writable:!0,configurable:!0})}function k(a,b){Object.setPrototypeOf(a,b[R]),j(a,S,b)}function l(a,b){a[R]=Object.create(b),a[R][S]=a}function m(a,e){if(e=e||[],e.length>15||e.indexOf(a)>=0)return"...";if(null==a)return String(a);if("string"==typeof a)return'"'+a+'"';if(b(n,a))return a.toString(e);if(e=[a].concat(e),c(a))return a.name||a.toString(e);if(b(Array,a))return"["+a.map(function(a){return m(a,e)}).join(", ")+"]";if(a.toString!==Object.prototype.toString)return a.toString();if(a&&d(a)){var f=new Array(e.length).join("\t"),g=Object.keys(a);return"{"+g.map(function(b){return"\n"+f+"\t"+b+": "+m(a[b],e)}).join(",")+(g.length?"\n"+f:"")+"}"}return String(a)}function n(a){if(!o(a))return n[y](a);var b=function(a){return a=h(b[T],a),b[G](a),a};return p(b,a,n),b}function o(a){return"Object"!=f(a)}function p(a,b,c){k(a,c),a[D]=b,a[E]=a[E].slice(),j(a,O,[])}function q(a){if(o(a)){if(!b(Array,a))return[a];if(1===a.length)return a.concat(void 0,null)}else Object.keys(a).forEach(function(b){a[b]=q(a[b])});return a}function r(a,c,d,e,f){var g;if(b(n,c)){var h=e.indexOf(c);if(h!==-1&&e.slice(h+1).indexOf(c)!==-1)return;return c[H](a,d,e.concat(c),f)}if(o(c)){for(var i=q(c),j=0,k=i.length;j<k;j++)if(s(a,i[j],d,e))return;g={},g[K]=c,g[L]=a,g[M]=d,f.push(g)}else Object.keys(c).forEach(function(b){var g=null!=a?a[b]:void 0;r(g,c[b],d?d+"."+b:b,e,f)})}function s(a,d,e,f){if(null==a)return a===d;if(!o(d)||b(n,d)){var g=[];return r(a,d,e,f,g),!g.length}return b(RegExp,d)?d[I](a):d===Number||d===Date?a[S]===d&&!isNaN(a):a===d||c(d)&&b(d,a)||a[S]===d}function t(a,b,c){void 0===c&&(c=b[O]);for(var d=0,e=b[E].length;d<e;d++){var f,g=b[E][d];try{f=g.call(b,a)}catch(a){f=a}if(f!==!0){var h={};h[N]=g[F].call(b,f,a),c.push(h)}}}function u(a,c,d,e){if(b(n,d)&&c&&!b(d,c))return d(c);if(b(Array,d)){for(var f=[],g=0,h=d.length;g<h;g++){var i=d[g];if(b(n,i)){if(b(i,c))return c;i.test(c)&&f.push(i)}}return 1===f.length?f[0](c):(f.length>1&&console.warn("Ambiguous model for value "+m(c)+", could be "+f.join(" or ")),c)}if(o(d))return c;var j=b(Object,c)?c:{},k=Object.create(Object.getPrototypeOf(j));for(var l in j)!j.hasOwnProperty(l)||l in d||(k[l]=j[l]);return Object.keys(d).forEach(function(b){var f=e?e+"."+b:b,g=n[B](b);$(k,b,{get:function(){return u(a,j[b],d[b],f)},set:function(e){if(g&&void 0!==j[b]){var h={};h[N]="cannot redefine constant "+b,a[O].push(h)}var i=u(a,e,d[b],f);r(i,d[b],f,[],a[O]);var k=j[b];j[b]=i,t(c,a),a[O].length&&(j[b]=k,a[Q]())},enumerable:!n[C](b)})}),k}function v(a,b,c,d){$(a,c,{enumerable:!0,get:function(){return b[c]},set:function(a){x(b,c,a,d)}})}function w(a,b,c,d){return function(){var e=a.slice();if(Array[R][b].apply(e,arguments),c[G](e),!Z)for(var f in e)!e.hasOwnProperty(f)||f in d||v(d,a,f,c);return Array[R][b].apply(a,arguments)}}function x(a,b,c,d){parseInt(b)===+b&&b>=0&&r(c,d[D],z+"["+b+"]",[],d[O]);var e=a.slice();e[b]=c,t(e,d),d[Q](),a[b]=c}var y="Object",z="Array",A="Function",B="conventionForConstant",C="conventionForPrivate",D="definition",E="assertions",F="_onFail",G="validate",H="_validator",I="test",J="extend",K="expected",L="received",M="path",N="message",O="errorStack",P="errorCollector",Q="unstack",R="prototype",S="constructor",T="default",U="defaults",V="return",W="arguments",X=["pop","push","reverse","shift","sort","splice","unshift"],Y=/\n.*object-model(.|\n)*object-model.*/,Z="function"==typeof Proxy,$=Object.defineProperty;"name"in Function.prototype&&"name"in function(){}||$(Function.prototype,"name",{get:function(){var a=Function.prototype.toString.call(this).match(/\s*function\s+([^\(\s]*)\s*/);return a&&a[1]}}),!Object.setPrototypeOf&&b(Array,{__proto__:[]})&&(Object.setPrototypeOf=function(a,b){return a.__proto__=b,a}),l(n,Function[R]);var _=n[R];_.toString=function(a){return q(this[D]).map(function(b){return m(b,a)}).join(" or ")},_[E]=[],_[G]=function(a,b){this[H](a,null,[],this[O]),this[Q](b)},_[I]=function(a){var b=[];return this[H](a,null,[],b),!b.length},_[J]=function(){var a,e,f=g(this[E]),h=g(arguments);b(n[y],this)?(a={},e={},i(a,this[D]),i(e,this[R],!1,!0),h.forEach(function(f){b(n,f)&&i(a,f[D],!0),c(f)&&i(e,f[R],!0,!0),d(f)&&i(a,f,!0,!0)})):a=h.reduce(function(a,b){return a.concat(q(b))},q(this[D])).filter(function(a,b,c){return c.indexOf(a)===b}),h.forEach(function(a){b(n,a)&&(f=f.concat(a[E]))});var j=new this[S](a);return l(j,this[R]),i(j[R],e),j[E]=f,j[P]=this[P],j},_.assert=function(a,b){b=b||m(a);var d=c(b)?b:function(a,c){return'assertion "'+b+'" returned '+m(a)+" for value "+m(c)};return j(a,F,d),this[E]=this[E].concat(a),this},_.defaultTo=function(a){return this[T]=a,this},_[P]=function(a){var b=new TypeError(a.map(function(a){return a[N]}).join("\n"));throw b.stack&&(b.stack=b.stack.replace(Y,"")),b},n[B]=function(a){return a.toUpperCase()===a},n[C]=function(a){return"_"===a[0]},j(_,H,function(a,b,c,d){r(a,this[D],b,c,d),t(a,this,d)}),j(_,Q,function(a){if(this[O].length){a||(a=this[P]);var c=this[O].map(function(a){if(!a[N]){var c=b(Array,a[K])?a[K]:[a[K]];a[N]="expecting "+(a[M]?a[M]+" to be ":"")+c.map(function(a){return m(a)}).join(" or ")+", got "+(null!=a[L]?f(a[L])+" ":"")+m(a[L])}return a});this[O]=[],a.call(this,c)}}),n[y]=function(a){var c=function(a){if(!b(c,this))return new c(a);a=h(c[T],a),i(this,a,!0);var d=u(c,this,c[D]);return c[G](d),d};return l(c,Object[R]),p(c,a,n[y]),c},l(n[y],_);var aa=n[y][R];aa[U]=function(a){return i(this[R],a),this},aa.toString=function(a){return m(this[D],a)},j(aa,H,function(a,b,c,e){if(d(a))r(a,this[D],b,c,e);else{var f={};f[K]=this,f[L]=a,f[M]=b,e.push(f)}t(a,this)}),n[z]=function(a){var b=function(a){a=h(b[T],a);var c;if(b[G](a),Z)c=new Proxy(a,{get:function(a,c){return c===S?b:X.indexOf(c)>=0?w(a,c,b):a[c]},set:function(a,c,d){x(a,c,d,b)},getPrototypeOf:function(){return b[R]}});else{c=Object.create(Array[R]);for(var d in a)a.hasOwnProperty(d)&&v(c,a,d,b);$(c,"length",{get:function(){return a.length}}),$(c,"toJSON",{value:function(){return a}}),X.forEach(function(d){j(c,d,w(a,d,b,c))}),k(c,b)}return c};return l(b,Array[R]),p(b,a,n[z]),b},l(n[z],n[R]);var ba=n[z][R];ba.toString=function(a){return z+" of "+m(this[D],a)},j(ba,H,function(a,c,d,e){if(b(Array,a))for(var f=0,g=a.length;f<g;f++)r(a[f],this[D],(c||z)+"["+f+"]",d,e);else{var h={};h[K]=this,h[L]=a,h[M]=c,e.push(h)}t(a,this)}),n[A]=function(){var a=function(b){b=h(a[T],b);var c=a[D],d=function(){var d,e=[];if(i(e,c[U]),i(e,g(arguments)),e.length>c[W].length){var f={};f[K]=m(b)+" to be called with "+c[W].length+" "+W,f[L]=e.length,a[O].push(f)}return c[W].forEach(function(b,c){r(e[c],b,W+"["+c+"]",[],a[O])}),t(e,a),a[O].length||(d=b.apply(this,e),V in c&&r(d,c[V],V+" value",[],a[O])),a[Q](),d};return k(d,a),d};l(a,Function[R]);var b={};return b[W]=g(arguments),p(a,b,n[A]),a},l(n[A],n[R]);var ca=n[A][R];ca.toString=function(a){var b=A+"("+this[D][W].map(function(b){return m(b,a)}).join(",")+")";return V in this[D]&&(b+=" => "+m(this[D][V])),b},ca[V]=function(a){return this[D][V]=a,this},ca[U]=function(){return this[D][U]=g(arguments),this},j(ca,H,function(a,b,d,e){if(!c(a)){var f={};f[K]=A,f[L]=a,f[M]=b,e.push(f)}}),a.Model=n}(this);