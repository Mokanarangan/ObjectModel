// ObjectModel v1.1.3 - http://objectmodel.js.org
!function(a){function b(a){return"function"==typeof a}function c(a){return"object"==typeof a}function d(a){return a&&c(a)&&Object.getPrototypeOf(a)===Object.prototype}function e(a,d){if(d&&(d.length>15||d.indexOf(a)>=0))return"...";if(null==a)return String(a);if("string"==typeof a)return'"'+a+'"';if(d=[a].concat(d),b(a))return a.name||a.toString(d);if(v(a))return"["+a.map(function(a){return e(a,d)}).join(", ")+"]";if(a&&c(a)){var f=new Array(d.length).join("	");return"{"+Object.keys(a).map(function(b){return"\n	"+f+b+": "+e(a[b],d)}).join(",")+"\n"+f+"}"}return String(a)}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1]}function g(a){return Array.prototype.slice.call(a)}function h(a,b,c){Object.keys(b||{}).forEach(function(e){if(c&&d(b[e])){var f={};h(f,a[e],c),h(f,b[e],c),a[e]=f}else a[e]=b[e]})}function i(a,b){w||Object.defineProperty(a,"__proto__",{enumerable:!1,writable:!0,value:b})}function j(a,b,c){a.prototype=Object.create(b),a.prototype.constructor=c||a,i(a.prototype,b)}function k(a,b){Object.setPrototypeOf(a,b.prototype),Object.defineProperty(a,"constructor",{enumerable:!1,writable:!0,value:b})}function l(a){if(!m(a))return l.Object(a);var b=function(a){return b.validate(a),a};return k(b,l),b.definition=a,b.assertions=[],b}function m(a){return"Object"!=f(a)}function n(a){if(m(a)){if(!v(a))return[a];if(1===a.length)return a.concat(void 0)}else Object.keys(a).forEach(function(b){a[b]=n(a[b])});return a}function o(a,b,c,d){if(m(b)){b=n(b);for(var g=0,h=b.length;h>g;g++)if(p(a,b[g],d))return;throw new TypeError("expecting "+(c?c+" to be ":"")+b.map(function(a){return e(a)}).join(" or ")+", got "+(null!=a?f(a)+" ":"")+e(a))}Object.keys(b).forEach(function(e){var f=null!=a?a[e]:void 0;o(f,b[e],c?c+"."+e:e,d.concat(f))})}function p(a,c,d){if(null==a)return a===c;if(l.instanceOf(c,l)){var e=d.indexOf(c);return-1!==e&&-1!==d.slice(e+1).indexOf(c)?!0:c.test(a,d.concat(c))}return c instanceof RegExp?c.test(a):a===c||b(c)&&a instanceof c||a.constructor===c}function q(a,b){for(var c=0,d=b.length;d>c;c++)if(!b[c](a))throw new TypeError("an assertion of the model is not respected: "+e(b[c]))}function r(a,b,c,d){if(l.instanceOf(c,l)&&!l.instanceOf(b,c))return c(b);if(m(c))return b;var e=b instanceof Object?b:{},f=Object.create(Object.getPrototypeOf(e));for(var g in e)!e.hasOwnProperty(g)||g in c||(f[g]=e[g]);return Object.keys(c).forEach(function(g){var h=d?d+"."+g:g,i=l.conventionForConstant(g);Object.defineProperty(f,g,{get:function(){return r(a,e[g],c[g],h)},set:function(d){if(i&&void 0!==e[g])throw new TypeError("cannot redefine constant "+g);var f=r(a,d,c[g],h);o(f,c[g],h,[]);var j=e[g];e[g]=f;try{q(b,a.assertions)}catch(k){throw e[g]=j,k}},enumerable:!l.conventionForPrivate(g)})}),f}function s(a,b,c,d){Object.defineProperty(a,c,{enumerable:!0,get:function(){return b[c]},set:function(a){u(b,c,a,d)}})}function t(a,b,c,d){return function(){var e=a.slice();if(Array.prototype[b].apply(e,arguments),c.validate(e),!x)for(var f in e)!e.hasOwnProperty(f)||f in d||s(d,a,f,c);return Array.prototype[b].apply(a,arguments)}}function u(a,b,c,d){parseInt(b)===+b&&b>=0&&o(c,d.definition,"Array["+b+"]",[]);var e=a.slice();e[b]=c,q(e,d.assertions),a[b]=c}var v=function(a){return a instanceof Array},w=!!Object.setPrototypeOf||{__proto__:[]}instanceof Array;Object.setPrototypeOf=Object.setPrototypeOf||(w?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c];i(a,b)}),Object.getPrototypeOf=Object.getPrototypeOf&&w?Object.getPrototypeOf:function(a){return a.__proto__||(a.constructor?a.constructor.prototype:null)};var x="function"==typeof Proxy;j(l,Function.prototype),l.prototype.toString=function(a){return n(this.definition).map(function(b){return e(b,a)}).join(" or ")},l.prototype.validate=function(a,b){o(a,this.definition,void 0,b||[]),q(a,this.assertions)},l.prototype.test=function(a,b){try{return this.validate(a,b),!0}catch(c){return!1}},l.prototype.extend=function(){var a,b,c=g(this.assertions),d=g(arguments);l.instanceOf(this,l.Object)?(a={},b={},h(a,this.definition),h(b,this.prototype),d.forEach(function(c){l.instanceOf(c,l)?(h(a,c.definition,!0),h(b,c.prototype,!0)):h(a,c,!0)})):a=d.reduce(function(a,b){return a.concat(n(b))},n(this.definition)).filter(function(a,b,c){return c.indexOf(a)===b}),d.forEach(function(a){l.instanceOf(a,l)&&(c=c.concat(a.assertions))});var e=new this.constructor(a);return j(e,this.prototype),h(e.prototype,b),e.assertions=c,e},l.prototype.assert=function(){return this.assertions=this.assertions.concat(g(arguments).filter(b)),this},l.instanceOf=function(a,b){return w?a instanceof b:function c(a,d){if(null==a||-1!==d.indexOf(a))return!1;var e=Object.getPrototypeOf(a);return d.push(a),e===b.prototype||c(e,d)}(a,[])},l.conventionForConstant=function(a){return a.toUpperCase()===a},l.conventionForPrivate=function(a){return"_"===a[0]},l.Object=function(a){var b=function(a){if(!(this instanceof b))return new b(a);h(this,a,!0);var c=r(b,this,b.definition);return b.validate(c),i(c,b.prototype),c};return k(b,l.Object),b.definition=a,b.assertions=[],b},j(l.Object,l.prototype,l),l.Object.prototype.defaults=function(a){return h(this.prototype,a),this},l.Object.prototype.toString=function(a){return e(this.definition,a)};var y=["pop","push","reverse","shift","sort","splice","unshift"];l.Array=function(a){var b=function(a){var c;if(b.validate(a),x)c=new Proxy(a,{get:function(a,c){return y.indexOf(c)>=0?t(a,c,b):a[c]},set:function(a,c,d){u(a,c,d,b)}});else{c=Object.create(Array.prototype);for(var d in a)a.hasOwnProperty(d)&&s(c,a,d,b);Object.defineProperty(c,"length",{get:function(){return a.length}}),y.forEach(function(d){Object.defineProperty(c,d,{configurable:!0,value:t(a,d,b,c)})})}return k(c,b),c};return j(b,Array.prototype),k(b,l.Array),b.definition=a,b.assertions=[],b},j(l.Array,l.prototype,l),l.Array.prototype.validate=function(a){if(!v(a))throw new TypeError("expecting "+this.toString()+", got: "+e(a));for(var b=0,c=a.length;c>b;b++)o(a[b],this.definition,"Array["+b+"]",[]);q(a,this.assertions)},l.Array.prototype.toString=function(a){return"Array of "+e(this.definition,a)},l.Function=function(){var a=function(b){var c=a.definition,d=function(){var d=[];if(h(d,c.defaults),h(d,g(arguments)),d.length!==c.arguments.length)throw new TypeError("expecting "+e(b)+" to be called with "+c.arguments.length+" arguments, got "+d.length);c.arguments.forEach(function(a,b){o(d[b],a,"arguments["+b+"]",[])}),q(d,a.assertions);var f=b.apply(this,d);return"return"in c&&o(f,c["return"],"return value",[]),f};return k(d,a),d};return j(a,Function.prototype),k(a,l.Function),a.definition={arguments:g(arguments)},a.assertions=[],a},j(l.Function,l.prototype,l),l.Function.prototype.validate=function(a){if(!b(a))throw new TypeError("expecting a function, got: "+e(a))},l.Function.prototype.toString=function(a){var b="Model.Function("+this.definition.arguments.map(function(b){return e(b,a)}).join(",")+")";return"return"in this.definition&&(b+=".return("+e(this.definition["return"])+")"),b},l.Function.prototype["return"]=function(a){return this.definition["return"]=a,this},l.Function.prototype.defaults=function(){return this.definition.defaults=g(arguments),this},a.Model=l}(this);